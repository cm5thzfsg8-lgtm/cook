<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‡´ê·¼ìš”ì • ìŒ¤ë´‡ - ë§ì¶¤í˜• ìˆ˜ì—… ë¹„ì„œ</title>
    <style>
        body { font-family: 'Pretendard', -apple-system, system-ui, sans-serif; background-color: #f0fdf4; color: #333; margin: 0; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 500px; background-color: #fff; min-height: 100vh; padding: 20px; box-sizing: border-box; box-shadow: 0 0 15px rgba(0,0,0,0.05); }
        h1 { color: #16a34a; text-align: center; font-size: 24px; margin-bottom: 5px; }
        p.subtitle { text-align: center; color: #666; font-size: 14px; margin-bottom: 20px; }
        
        .archive-section { background-color: #fef3c7; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .archive-header { display: flex; justify-content: space-between; align-items: center; font-weight: bold; color: #d97706; cursor: pointer; }
        .archive-list { margin-top: 10px; display: none; flex-direction: column; gap: 8px; max-height: 200px; overflow-y: auto; }
        .archive-item { background: white; padding: 10px; border-radius: 6px; font-size: 13px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #fde68a; }
        .archive-item button { background: #ef4444; color: white; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer; font-size: 11px; }

        .api-setup { background-color: #f1f5f9; padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 13px; }
        .api-setup input { width: 100%; padding: 8px; margin-top: 8px; box-sizing: border-box; border: 1px solid #cbd5e1; border-radius: 6px; }
        .input-group { display: flex; flex-direction: column; gap: 12px; }
        .row { display: flex; gap: 10px; }
        input[type="text"], select { padding: 12px; font-size: 15px; border: 2px solid #bbf7d0; border-radius: 8px; outline: none; box-sizing: border-box; }
        input[type="text"]:focus, select:focus { border-color: #22c55e; }
        
        #grade { width: 40%; }
        #subject { width: 60%; }
        #topic { width: 100%; }

        button.submit-btn { background-color: #22c55e; color: white; border: none; padding: 15px; font-size: 16px; font-weight: bold; border-radius: 8px; cursor: pointer; margin-top: 10px; transition: 0.2s; }
        button.submit-btn:hover { background-color: #16a34a; }
        #loading { display: none; text-align: center; color: #16a34a; font-weight: bold; margin-top: 20px; }
        #result-section { display: none; margin-top: 25px; }
        
        .ai-plan { background-color: #f8fafc; padding: 20px; border-radius: 10px; border: 1px solid #e2e8f0; line-height: 1.6; font-size: 15px; }
        
        .checklist-box { background-color: #fffbeb; padding: 15px; border-radius: 10px; border: 1px solid #fde68a; margin-bottom: 15px; font-size: 14px; }
        .checklist-box label { display: block; margin-bottom: 5px; cursor: pointer; }
        .checklist-box input[type="checkbox"] { margin-right: 8px; cursor: pointer; transform: scale(1.2); }
        .checklist-box input[type="checkbox"]:checked + span { text-decoration: line-through; color: #9ca3af; }

        .magic-buttons { display: flex; gap: 8px; margin-top: 15px; flex-wrap: wrap; }
        .magic-btn { flex: 1 1 45%; padding: 10px; border-radius: 8px; border: none; font-size: 13px; font-weight: bold; cursor: pointer; background-color: #e0e7ff; color: #4338ca; transition: 0.2s; }
        .magic-btn:hover { background-color: #c7d2fe; }
        #magic-loading { display: none; text-align: center; font-size: 13px; color: #4338ca; margin-top: 10px; }
        #magic-result { display: none; background-color: #e0e7ff; padding: 15px; border-radius: 10px; margin-top: 10px; font-size: 14px; line-height: 1.5; border: 1px solid #c7d2fe; }

        .links-box { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }
        .link-btn { display: inline-block; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none; font-weight: bold; color: white; }
        
        .youtube-btn { background-color: #ef4444; }
        .google-web-btn { background-color: #3b82f6; } 
        .google-img-btn { background-color: #10b981; } 
        .save-btn { background-color: #fbbf24; color: #854d0e; border: none; padding: 8px 12px; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 13px; }
        .save-btn:hover { background-color: #f59e0b; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ§š í‡´ê·¼ìš”ì • ìŒ¤ë´‡</h1>
    <p class="subtitle">10ì´ˆ ë§Œì— ëë‚´ëŠ” ì°¨ì‹œë³„ ìˆ˜ì—… ì•„ì´ë””ì–´ & ìë£Œ ê²€ìƒ‰</p>

    <div class="archive-section">
        <div class="archive-header" onclick="toggleArchive()">
            ğŸ“Œ ë‚´ ìˆ˜ì—… ì°½ê³  (ì €ì¥ëœ ìˆ˜ì—… ë³´ê¸°) <span>â–¼</span>
        </div>
        <div class="archive-list" id="archive-list"></div>
    </div>

    <div class="api-setup" id="api-setup-box">
        <strong>ğŸ”‘ ì¤€ë¹„ë¬¼: Google Gemini API í‚¤</strong><br>
        <span style="color:#64748b;">(ë¸Œë¼ìš°ì €ì— ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤)</span>
        <input type="password" id="api-key" placeholder="AIzaSy... ë¡œ ì‹œì‘í•˜ëŠ” í‚¤ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”">
        <button onclick="saveApiKey()" style="margin-top:8px; padding:5px 10px; cursor:pointer;">í‚¤ ì €ì¥í•˜ê¸°</button>
    </div>

    <div class="input-group">
        <div class="row">
            <select id="grade">
                <option value="ì´ˆë“± 1í•™ë…„">1í•™ë…„</option><option value="ì´ˆë“± 2í•™ë…„">2í•™ë…„</option>
                <option value="ì´ˆë“± 3í•™ë…„">3í•™ë…„</option><option value="ì´ˆë“± 4í•™ë…„">4í•™ë…„</option>
                <option value="ì´ˆë“± 5í•™ë…„">5í•™ë…„</option><option value="ì´ˆë“± 6í•™ë…„">6í•™ë…„</option>
            </select>
            <input type="text" id="subject" placeholder="ê³¼ëª© (ì˜ˆ: ì˜ì–´, ë¯¸ìˆ , ì‹¤ê³¼)">
        </div>
        <input type="text" id="topic" placeholder="ì˜¤ëŠ˜ì˜ í•µì‹¬ ëª©í‘œ (ì˜ˆ: í•™êµ ì‹œì„¤ íƒë°©)">
        <button class="submit-btn" onclick="generateLesson()">ìˆ˜ì—… ë¹„ì„œ í˜¸ì¶œí•˜ê¸° ğŸš€</button>
    </div>

    <div id="loading">AIì™€ êµì‚¬ê°€ í•¨ê»˜ ë©‹ì§„ ìˆ˜ì—…ì„ ë§Œë“¤ì–´ë‚˜ê°€ëŠ” ì¤‘... â³</div>

    <div id="result-section">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h3 style="color:#16a34a; margin:0;">ğŸ“ ì˜¤ëŠ˜ì˜ ìˆ˜ì—… ì œì•ˆ</h3>
            <button class="save-btn" onclick="saveCurrentLesson()">ğŸ’¾ ì´ ìˆ˜ì—… ì €ì¥í•˜ê¸°</button>
        </div>
        
        <div class="checklist-box" id="prep-checklist"></div>
        <div class="ai-plan" id="ai-content"></div>

        <h3 style="color:#4338ca; margin-top:30px;">âœ¨ ìŒ¤ë´‡ ë””í…Œì¼ ë§ˆë²• (í´ë¦­!)</h3>
        <div class="magic-buttons">
            <button class="magic-btn" onclick="runMagic('PPT')">ğŸ–¥ï¸ PPT ëŒ€ë³¸ ë¼ˆëŒ€ ì¶”ì¶œ</button>
            <button class="magic-btn" onclick="runMagic('í‰ì–´')">ğŸ“ ë‚˜ì´ìŠ¤ í‰ì–´ ë½‘ê¸°</button>
            <button class="magic-btn" onclick="runMagic('ë†€ì´ë³€ê²½')">ğŸ² ë‹¤ë¥¸ ë†€ì´ë¡œ ë³€ê²½</button>
            <button class="magic-btn" onclick="runMagic('í€´ì¦ˆ')">ğŸ–¨ï¸ í˜•ì„±í‰ê°€ í€´ì¦ˆ ìƒì„±</button>
        </div>
        <div id="magic-loading">ë§ˆë²•ì„ ë¶€ë¦¬ëŠ” ì¤‘... ğŸª„</div>
        <div id="magic-result"></div>

        <h3 style="color:#16a34a; margin-top:30px;">ğŸ¯ ë§ì¶¤í˜• ìë£Œ ë°”ë¡œ ì°¾ê¸°</h3>
        <div class="links-box" id="dynamic-links"></div>
    </div>
</div>

<script>
    let currentLessonData = null;

    window.onload = function() {
        const savedKey = localStorage.getItem('geminiApiKey');
        if (savedKey) {
            document.getElementById('api-key').value = savedKey;
            document.getElementById('api-setup-box').style.display = 'none';
        }
        renderArchive();
    };

    function saveApiKey() {
        const key = document.getElementById('api-key').value.trim(); 
        if(key) {
            localStorage.setItem('geminiApiKey', key);
            alert('API í‚¤ê°€ ì•ˆì „í•˜ê²Œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            document.getElementById('api-setup-box').style.display = 'none';
        }
    }

    async function generateLesson() {
        const apiKey = (localStorage.getItem('geminiApiKey') || document.getElementById('api-key').value).trim();
        const grade = document.getElementById('grade').value;
        const subject = document.getElementById('subject').value.trim(); 
        const topic = document.getElementById('topic').value.trim();

        if (!apiKey) { alert("API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”!"); return; }
        if (!subject || !topic) { alert("ê³¼ëª©ê³¼ ëª©í‘œë¥¼ ëª¨ë‘ ì ì–´ì£¼ì„¸ìš”!"); return; }

        document.getElementById('result-section').style.display = 'none';
        document.getElementById('magic-result').style.display = 'none';
        document.getElementById('loading').style.display = 'block';

        const prompt = `ë‹¹ì‹ ì€ íƒì›”í•œ ì´ˆë“±í•™êµ êµì‚¬ì…ë‹ˆë‹¤. ì•„ë˜ ëŒ€ìƒê³¼ ëª©í‘œë¥¼ ë°”íƒ•ìœ¼ë¡œ 40ë¶„ ë¶„ëŸ‰ì˜ ìˆ˜ì—… ê³„íšì„ ì§œì£¼ì„¸ìš”.
        [ì¡°ê±´]
        1. ìˆ˜ì—…ì€ í•™ìƒ ì°¸ì—¬í˜• ìœ„ì£¼ë¡œ [ë„ì…], [ì „ê°œ], [ì •ë¦¬]ë¡œ ëª…í™•íˆ ë‚˜ëˆŒ ê²ƒ.
        2. ë§ˆì§€ë§‰ì— [í•™ë¶€ëª¨ ì•Œë¦¼ì¥ ì¶”ì²œ ë¬¸êµ¬] í¬í•¨í•  ê²ƒ.
        3. ì•„ë˜ ì–‘ì‹ì„ ë°˜ë“œì‹œ ì—„ê²©í•˜ê²Œ ì§€ì¼œì„œ ë‹µë³€í•  ê²ƒ. (ëŒ€ê´„í˜¸ íƒœê·¸ í•„ìˆ˜)
        [ì¤€ë¹„ë¬¼]
        (êµì‚¬ ë° í•™ìƒ ì¤€ë¹„ë¬¼ì„ '-' ê¸°í˜¸ë¡œ ë‚˜ì—´)
        [ìˆ˜ì—…ê³„íš]
        (ì—¬ê¸°ì— ë‹¤ì •í•œ ë§íˆ¬ë¡œ ìˆ˜ì—… ê³„íšê³¼ ì•Œë¦¼ì¥ ì‘ì„±)
        [ìœ íŠœë¸Œê²€ìƒ‰ì–´]
        (ë™ê¸°ìœ ë°œìš© êµ¬ì²´ì  ìœ íŠœë¸Œ ê²€ìƒ‰ì–´ ë”± 1ê°œ)
        [êµ¬ê¸€ê²€ìƒ‰ì–´]
        (í•™ìŠµì§€/í™œë™ì§€ìš© êµ¬ê¸€ ì›¹ ê²€ìƒ‰ì–´ ë”± 1ê°œ)
        [ì´ë¯¸ì§€ê²€ìƒ‰ì–´]
        (ì‹œê°ìë£Œ/ë„ì•ˆìš© êµ¬ê¸€ ì´ë¯¸ì§€ ê²€ìƒ‰ì–´ ë”± 1ê°œ)

        ëŒ€ìƒ: ${grade} ${subject}, í•™ìŠµëª©í‘œ: ${topic}`;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`, {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });
            const data = await response.json();
            if(data.error) { throw new Error(data.error.message); }

            const fullText = data.candidates[0].content.parts[0].text;
            
            const prepMatch = fullText.match(/\[ì¤€ë¹„ë¬¼\]([\s\S]*?)\[ìˆ˜ì—…ê³„íš\]/);
            const planMatch = fullText.match(/\[ìˆ˜ì—…ê³„íš\]([\s\S]*?)\[ìœ íŠœë¸Œê²€ìƒ‰ì–´\]/);
            const ytMatch = fullText.match(/\[ìœ íŠœë¸Œê²€ìƒ‰ì–´\]([\s\S]*?)\[êµ¬ê¸€ê²€ìƒ‰ì–´\]/);
            const webMatch = fullText.match(/\[êµ¬ê¸€ê²€ìƒ‰ì–´\]([\s\S]*?)\[ì´ë¯¸ì§€ê²€ìƒ‰ì–´\]/);
            const imgMatch = fullText.match(/\[ì´ë¯¸ì§€ê²€ìƒ‰ì–´\]([\s\S]*)/);

            let prepText = prepMatch ? prepMatch[1].trim() : "- ì¤€ë¹„ë¬¼ ì—†ìŒ";
            let lessonPlan = planMatch ? planMatch[1].trim() : fullText;
            let ytQuery = ytMatch ? ytMatch[1].trim() : `ì´ˆë“± ${topic}`;
            let webQuery = webMatch ? webMatch[1].trim() : `${grade} ${subject} ${topic} í™œë™ì§€`;
            let imgQuery = imgMatch ? imgMatch[1].trim() : `ì´ˆë“± ${topic} ì‹œê°ìë£Œ`;

            const prepItems = prepText.split('\n').filter(item => item.trim() !== '');
            let checklistHTML = `<strong>â˜‘ï¸ ì˜¤ëŠ˜ ì±™ê²¨ì•¼ í•  ì¤€ë¹„ë¬¼</strong><br><br>`;
            prepItems.forEach((item, index) => {
                let cleanItem = item.replace(/^-/, '').trim();
                checklistHTML += `<label><input type="checkbox" id="chk${index}"> <span>${cleanItem}</span></label>`;
            });
            document.getElementById('prep-checklist').innerHTML = checklistHTML;

            document.getElementById('ai-content').innerHTML = lessonPlan.replace(/\n/g, '<br>');

            document.getElementById('dynamic-links').innerHTML = `
                <a href="https://www.youtube.com/results?search_query=${encodeURIComponent(ytQuery)}" target="_blank" class="link-btn youtube-btn">â–¶ï¸ ìœ íŠœë¸Œ: "${ytQuery}"</a>
                <a href="https://www.google.com/search?q=${encodeURIComponent(webQuery)}" target="_blank" class="link-btn google-web-btn">ğŸ” í™œë™ì§€: "${webQuery}"</a>
                <a href="https://www.google.com/search?tbm=isch&q=${encodeURIComponent(imgQuery)}" target="_blank" class="link-btn google-img-btn">ğŸ–¼ï¸ ì‹œê°ìë£Œ: "${imgQuery}"</a>
            `;

            currentLessonData = { title: `${grade} ${subject} - ${topic}`, plan: lessonPlan };

            document.getElementById('loading').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';

        } catch (error) {
            alert("ì˜¤ë¥˜ ë°œìƒ:\n" + error.message);
            document.getElementById('loading').style.display = 'none';
        }
    }

    async function runMagic(type) {
        if (!currentLessonData) return;
        const apiKey = localStorage.getItem('geminiApiKey');
        
        let magicPrompt = "";
        // â˜… PPT ì¶”ì¶œ í”„ë¡¬í”„íŠ¸ ì¶”ê°€ â˜…
        if (type === 'PPT') {
            magicPrompt = `ë‹¤ìŒ ìˆ˜ì—… ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ, êµì‚¬ê°€ ìˆ˜ì—… ì‹œê°„ì— í™”ë©´ì— ë„ìš¸ PPT ìŠ¬ë¼ì´ë“œì˜ ë¼ˆëŒ€ì™€ ëŒ€ë³¸ì„ êµ¬ì„±í•´ ì¤˜.\n\n[ì¡°ê±´]\n1. ìŠ¬ë¼ì´ë“œ 5~7ì¥ ë‚´ì™¸ë¡œ êµ¬ì„±í•  ê²ƒ.\n2. ê° ìŠ¬ë¼ì´ë“œ ë²ˆí˜¸ë§ˆë‹¤ [í™”ë©´ì— ë„ìš¸ í…ìŠ¤íŠ¸/ì´ë¯¸ì§€ ì„¤ëª…]ê³¼ [êµì‚¬ê°€ ì‹¤ì œë¡œ ë§í•  ëŒ€ë³¸]ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ì—¬ ì‘ì„±í•´ ì¤˜.\n\n[ìˆ˜ì—…ë‚´ìš©]\n${currentLessonData.plan}`;
        } else if (type === 'í‰ì–´') {
            magicPrompt = `ë‹¤ìŒ ìˆ˜ì—… ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ë‚˜ì´ìŠ¤(NEIS) êµê³¼í•™ìŠµë°œë‹¬ìƒí™©ì— ë³µì‚¬í•´ ë„£ì„ ìˆ˜ ìˆëŠ” í‰ê°€ ê¸°ë¡(í‰ì–´)ì„ 'ìƒ, ì¤‘, í•˜' 3ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ê°ê° 1ë¬¸ì¥ì”© ì‘ì„±í•´ ì¤˜.\n\n[ìˆ˜ì—…ë‚´ìš©]\n${currentLessonData.plan}`;
        } else if (type === 'ë†€ì´ë³€ê²½') {
            magicPrompt = `ë‹¤ìŒ ìˆ˜ì—… ë‚´ìš© ì¤‘ 'ì „ê°œ(í•µì‹¬í™œë™)' ë¶€ë¶„ì˜ í™œë™ì„ ì™„ì „íˆ ë‹¤ë¥¸ ìƒˆë¡œìš´ ë†€ì´í˜• í™œë™ìœ¼ë¡œ 1ê°œ ì œì•ˆí•´ ì¤˜. ì¤€ë¹„ë¬¼ì´ ì ê²Œ ë“œëŠ” í™œë™ì´ë©´ ì¢‹ì•„.\n\n[ìˆ˜ì—…ë‚´ìš©]\n${currentLessonData.plan}`;
        } else if (type === 'í€´ì¦ˆ') {
            magicPrompt = `ë‹¤ìŒ ìˆ˜ì—… ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ, ìˆ˜ì—… ë§ˆì§€ë§‰ì— ì•„ì´ë“¤ì—ê²Œ í˜•ì„±í‰ê°€ìš©ìœ¼ë¡œ ë‚¼ ìˆ˜ ìˆëŠ” O/X í€´ì¦ˆ 2ë¬¸ì œì™€ ì§§ì€ ë‹¨ë‹µí˜• ì£¼ê´€ì‹ 1ë¬¸ì œë¥¼ ì •ë‹µê³¼ í•¨ê»˜ ë§Œë“¤ì–´ ì¤˜.\n\n[ìˆ˜ì—…ë‚´ìš©]\n${currentLessonData.plan}`;
        }

        document.getElementById('magic-loading').style.display = 'block';
        document.getElementById('magic-result').style.display = 'none';

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`, {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: magicPrompt }] }] })
            });
            const data = await response.json();
            const magicText = data.candidates[0].content.parts[0].text;
            
            document.getElementById('magic-result').innerHTML = `<strong>âœ¨ ë§ˆë²• ê²°ê³¼:</strong><br><br>` + magicText.replace(/\n/g, '<br>');
            document.getElementById('magic-loading').style.display = 'none';
            document.getElementById('magic-result').style.display = 'block';
        } catch (error) {
            alert("ë§ˆë²• ì‹¤íŒ¨: " + error.message);
            document.getElementById('magic-loading').style.display = 'none';
        }
    }

    function toggleArchive() {
        const list = document.getElementById('archive-list');
        list.style.display = list.style.display === 'flex' ? 'none' : 'flex';
    }

    function saveCurrentLesson() {
        if (!currentLessonData) return;
        let archive = JSON.parse(localStorage.getItem('lessonArchive') || '[]');
        const today = new Date();
        const dateStr = `${today.getMonth()+1}/${today.getDate()}`;
        
        archive.push({ date: dateStr, title: currentLessonData.title, plan: currentLessonData.plan });
        localStorage.setItem('lessonArchive', JSON.stringify(archive));
        alert('ë‚´ ì°½ê³ ì— ì•ˆì „í•˜ê²Œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“Œ');
        renderArchive();
    }

    function renderArchive() {
        let archive = JSON.parse(localStorage.getItem('lessonArchive') || '[]');
        const listDiv = document.getElementById('archive-list');
        listDiv.innerHTML = '';

        if(archive.length === 0) {
            listDiv.innerHTML = '<span style="color:#999; font-size:12px;">ì•„ì§ ì €ì¥ëœ ìˆ˜ì—…ì´ ì—†ìŠµë‹ˆë‹¤.</span>';
            return;
        }

        archive.reverse().forEach((item, idx) => {
            const realIndex = archive.length - 1 - idx; 
            const div = document.createElement('div');
            div.className = 'archive-item';
            div.innerHTML = `
                <div><strong style="color:#d97706;">[${item.date}]</strong> ${item.title}</div>
                <div>
                    <button style="background:#3b82f6;" onclick="loadLesson(${realIndex})">ë¶ˆëŸ¬ì˜¤ê¸°</button>
                    <button onclick="deleteLesson(${realIndex})">ì‚­ì œ</button>
                </div>
            `;
            listDiv.appendChild(div);
        });
    }

    function loadLesson(index) {
        let archive = JSON.parse(localStorage.getItem('lessonArchive') || '[]');
        const item = archive[index];
        if(!item) return;

        document.getElementById('prep-checklist').innerHTML = '<em>ì €ì¥ëœ ìˆ˜ì—…ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤. (ì¤€ë¹„ë¬¼/ë§ˆë²•ì€ ìƒˆë¡œê³ ì¹¨ í›„ ë‹¤ì‹œ ìƒì„± ê°€ëŠ¥)</em>';
        document.getElementById('ai-content').innerHTML = item.plan.replace(/\n/g, '<br>');
        document.getElementById('dynamic-links').innerHTML = ''; 
        document.getElementById('magic-result').style.display = 'none';
        
        document.getElementById('result-section').style.display = 'block';
        alert(`[${item.title}] ìˆ˜ì—…ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!`);
        
        // ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¡œ í˜„ì¬ ë©”ëª¨ë¦¬ ë®ì–´ì“°ê¸° (ë§ˆë²• ë²„íŠ¼ ì •ìƒ ì‘ë™ì„ ìœ„í•´)
        currentLessonData = { title: item.title, plan: item.plan };
    }

    function deleteLesson(index) {
        if(confirm("ì´ ìˆ˜ì—… ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            let archive = JSON.parse(localStorage.getItem('lessonArchive') || '[]');
            archive.splice(index, 1);
            localStorage.setItem('lessonArchive', JSON.stringify(archive));
            renderArchive();
        }
    }
</script>

</body>
</html>
